<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}CalculateNTrade{% endblock %}</title>
  <meta name="description" content="CalculateNTrade — fast trading calculators and trade journal for active traders." />

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --bg:#0f1724; 
      --card:#0b1220;
      --accent:#0ea5a4;
      --muted:#94a3b8;
    }
    body.light { --bg:#fbfdff; --card:#ffffff; --accent:#0369a1; --muted:#6b7280; color:#0b1220; }

    body { background: var(--bg); color: #e6eef6; transition: background-color .25s, color .25s; }
    :focus { outline: none; }
    .focus-ring:focus-visible { box-shadow: 0 0 0 3px rgba(14,165,164,0.16); border-radius: 6px; }
    .screenshot-placeholder { background: linear-gradient(135deg, rgba(14,165,164,0.06), rgba(2,6,23,0.45)); border: 1px dashed rgba(14,165,164,0.14); }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; animation: none !important; }
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>
<body class="antialiased font-sans">

  <header class="sticky top-0 z-40 backdrop-blur-sm bg-opacity-40" style="background: linear-gradient(180deg, rgba(3,7,18,0.6), rgba(3,7,18,0.35));">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between py-4">
        
        <a href="{{ url_for('home') }}"  class="flex items-center gap-3 group" aria-label="CalculatenTrade home">
          <img src="{{ url_for('static', filename='favicons/android-chrome-192x192.png') }}" alt="CNT Logo" class="w-10 h-10 rounded-lg drop-shadow-md">
          <div>
            <span class="text-xl font-semibold tracking-tight">CalculateNTrade</span>
            <div class="text-xs text-slate-400 -mt-0.5">Trading Calculator & Journal</div>
          </div>
        </a>

        
        <nav class="hidden md:flex items-center gap-6 absolute left-1/2 transform -translate-x-1/2" aria-label="Main navigation">
          <a href="{{ url_for('home')}}" class="text-slate-300 hover:text-white transition">Features</a>
          <a href="{{ url_for('calculator') }}" class="text-slate-300 hover:text-white transition">Calculators</a>
          <a href="{{ url_for('calculatentrade.dashboard') }}" class="text-slate-300 hover:text-white transition">Journal</a>
         
        </nav>
        <div class="hidden md:flex items-center gap-3">
          {% if current_user and current_user.is_authenticated %}
            <button onclick="document.getElementById('welcomeModal').classList.remove('hidden')" class="px-3 py-1.5 text-sm text-white bg-gradient-to-r from-teal-600 to-teal-500 border border-teal-500 rounded-lg hover:from-teal-700 hover:to-teal-600 hover:border-teal-400 transition shadow-md">
              {{ current_user.email.split('@')[0] }}
            </button>
            <a href="{{ url_for('settings') }}" class="p-2 rounded-md text-slate-200 hover:text-white focus-ring" title="Settings">
              <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </a>
          {% else %}
            <a href="{{ url_for('login') }}" class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-sky-600 to-teal-500 text-sm rounded-md shadow-md focus-ring" role="button">Sign In</a>
          {% endif %}
        </div>
        <div class="md:hidden">
          <button id="nav-toggle" class="p-2 rounded-md focus-ring" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu">
            <svg id="hamburger-open" class="w-6 h-6" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 7h16M4 12h16M4 17h16" stroke="white" stroke-width="2" stroke-linecap="round"></path>
            </svg>
            <svg id="hamburger-close" class="w-6 h-6 hidden" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 6l12 12M18 6L6 18" stroke="white" stroke-width="2" stroke-linecap="round"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="md:hidden hidden" role="region" aria-label="Mobile menu">
      <div class="px-4 pb-6 space-y-3">
        <a href="#features" class="block px-3 py-2 rounded-md text-slate-200 hover:bg-slate-800">Features</a>
        <a href="{{ url_for('calculator') }}" class="block px-3 py-2 rounded-md text-slate-200 hover:bg-slate-800">Calculators</a>
        <a href="{{ url_for('show_saved_trades') }}" class="block px-3 py-2 rounded-md text-slate-200 hover:bg-slate-800">Journal</a>
        {% if current_user and current_user.is_authenticated %}
        <a href="{{ url_for('settings') }}" class="block px-3 py-2 rounded-md text-slate-200 hover:bg-slate-800">Settings</a>
        {% endif %}
       
        <div class="flex gap-3 pt-2">
          {% if current_user and current_user.is_authenticated %}
          <a href="{{ url_for('settings') }}" class="w-full px-3 py-2 rounded-md text-center bg-slate-800">Settings</a>
          {% else %}
          <a href="{{ url_for('login') }}" class="w-full px-3 py-2 rounded-md text-center bg-gradient-to-r from-sky-600 to-teal-500">Sign In</a>
          {% endif %}
        </div>
      </div>
    </div>
  </header>

  {% block content %}{% endblock %}
  <footer class="border-t border-slate-800 mt-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 md:grid-cols-4 gap-6">
      <div>
        <a href="{{ url_for('home') }}" class="flex items-center gap-3">
          <img src="{{ url_for('static', filename='favicons/android-chrome-192x192.png') }}" alt="CNT Logo" class="w-8 h-8 rounded-lg">
          <div>
            <div class="font-semibold">Trading Calculator & Journal</div>
          </div>
        </a>
        <p class="text-xs text-slate-500 mt-3">Trusted by active traders. Built with speed, clarity and security in mind.</p>
      </div>

      <div class="text-sm text-slate-400">
        <div class="font-semibold mb-2">Product</div>
        <ul class="space-y-1">
          <li><a href="#features" class="hover:underline">Features</a></li>
          <li><a href="{{ url_for('calculator') }}" class="hover:underline">Calculators</a></li>
          <li><a href="{{ url_for('show_saved_trades') }}" class="hover:underline">Journal</a></li>
        </ul>
      </div>

      <div class="text-sm text-slate-400">
        <div class="font-semibold mb-2">Legal</div>
        <ul class="space-y-1">
          <li><a href="{{ url_for('terms') }}" class="hover:underline">Terms & Conditions</a></li>
          <li><a href="{{ url_for('privacy_policy') }}" class="hover:underline">Privacy Policy</a></li>
          <li><a href="{{ url_for('refund_policy') }}" class="hover:underline">Refund Policy</a></li>
        </ul>
      </div>

      <div class="text-sm text-slate-400">
        <div class="font-semibold mb-2">Contact</div>
        <div class="text-xs">connect@calculatentrade.com</div>
        <div class="mt-3 flex gap-3">
          <a href="https://www.instagram.com/calculatentrade?igsh=bng1bnF3dnJtMWZj" target="_blank" class="p-2 rounded bg-slate-800 focus-ring" aria-label="Instagram"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><rect x="2" y="2" width="20" height="20" rx="5" ry="5" stroke="white" stroke-width="1.2"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" stroke="white" stroke-width="1.2"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" stroke="white" stroke-width="1.2" stroke-linecap="round"/></svg></a>
        </div>
      </div>
    </div>

    <div class="bg-[color:var(--card)] border-t border-slate-800 text-center py-3 text-xs text-slate-500">
      © <span id="year"></span> CalculateNTrade — All rights reserved.
    </div>
  </footer>

  <!-- Welcome Modal -->
  {% if current_user and current_user.is_authenticated %}
  <div id="welcomeModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
    <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl border border-slate-700 max-w-md w-full shadow-2xl">
      <div class="px-8 py-6 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 rounded-t-2xl">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="p-2 bg-gradient-to-br from-teal-600 to-teal-500 rounded-lg">
              <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <h3 class="text-lg font-bold text-white">Welcome!</h3>
          </div>
          <button onclick="document.getElementById('welcomeModal').classList.add('hidden')" class="text-slate-400 hover:text-white transition">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="p-6">
        <div class="space-y-4 text-slate-300">
          <p class="font-medium text-white">Hi {{ current_user.email }}!</p>
          <p>Thank you for logging in to CalculateNTrade.</p>
          <p>Your trust means a lot. We handle the trade management and calculations with precision, so you can stay focused on learning, strategy, and mastering the market.</p>
        </div>
        <div class="mt-6 flex gap-3">
          <a href="{{ url_for('logout') }}" class="flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-700 hover:to-red-600 text-white rounded-lg font-medium transition">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16,17 21,12 16,7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            Logout
          </a>
          <button onclick="document.getElementById('welcomeModal').classList.add('hidden')" class="flex-1 px-4 py-2 bg-gradient-to-r from-teal-600 to-teal-500 hover:from-teal-700 hover:to-teal-600 text-white rounded-lg font-medium transition">
            Got it!
          </button>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <script>
    (function(){
      const navToggle = document.getElementById('nav-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const hamOpen = document.getElementById('hamburger-open');
      const hamClose = document.getElementById('hamburger-close');
      if (navToggle) {
        navToggle.addEventListener('click', () => {
          const expanded = navToggle.getAttribute('aria-expanded') === 'true';
          navToggle.setAttribute('aria-expanded', String(!expanded));
          mobileMenu && mobileMenu.classList.toggle('hidden');
          hamOpen && hamOpen.classList.toggle('hidden');
          hamClose && hamClose.classList.toggle('hidden');
        });
      }

      // Year
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
    })();f (yearEl) yearEl.textContent = new Date().getFullYear();
    })();
  </script>

  <!-- Toast Service -->
  <script src="{{ url_for('static', filename='js/toast-service.js') }}"></script>
  
  <!-- Flash Messages Integration -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div id="flash-messages" style="display: none;">
        {% for category, message in messages %}
          <div data-flash-message data-flash-category="{{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% block extra_js %}{% endblock %}

</body>
</html>
